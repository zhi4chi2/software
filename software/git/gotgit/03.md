# 在 Linux 下安装和使用 Git
FIXME 核对命令补齐
- /etc/bash_completion.d/git-completion.bash
- 本地配置 ~/.bash_profile, ~/.bashrc
- 系统配置 /etc/bashrc, /etc/profile


## 中文支持
- 提交说明中使用中文
- 使用中文文件名或者目录名
- 使用中文分支和里程碑


### UTF-8 字符集
如果 Linux 使用 UTF-8 字符集，在 Git 只需要设置 `git config --global core.quotepath false` 使得中文文件名的文件在工作区状态输出、查看历史更改概要、以及在补丁文件中正确显示中文即可。


测试
```bash
cd workspace
git init
mkdir 中文目录
echo 中文内容 > 中文目录/中文文件
git add 中文目录
git diff --cached
git status
git commit -m '初次提交'
git log -p
git tag 中文标签
git tag
git branch 中文分支
git branch
git checkout 中文分支
echo 添加内容 >> 中文目录/中文文件
git commit -a -m '修改中文文件'
git checkout master
git merge 中文分支
git log -p
cd ..
git clone --bare workspace workspace.git
```
结果
```bash
FIXME
```


FIXME 将库 clone 到 windows 下测试。


### GBK 字符集
如果 Linux 使用非 UTF-8 字符集，例如 GBK ，就需要再
- `git config --global i18n.commitEncoding gbk` 设置录入提交说明时所使用的字符集
- `git config --global i18n.logOutputEncoding gbk` 使 git log 正确显示提交说明中的中文


Git 并不在提交对象中做字符集 GBK -> UTF-8 的转换，它只是在 commit 对象中标注而已。


# 在 Mac OS X 下安装和使用 Git
FIXME


# 在 Windows 下安装和使用 Git(Cygwin 篇)
需要安装的包
- git
- git-completion - 提供 Git 命令自动补齐功能。自动安装依赖的 bash-completion
- openssh
- vim


# 在 Windows 下安装和使用 Git(msysGit 篇)
msysGit 的 MSYS 表示 Minimal SYStem 最简系统。


MSYS 项目源自于 MinGW(Minimalist GNU for Windows, 最简 GNU 工具集)，通过增加了一个 bash 提供的 shell 环境以及其他相关工具软件，组成了一个最简系统，简称 MSYS 。


msysGit 已经在配置文件 /etc/inputrc 中包含了下列的设置
```
set completion-ignore-case on
```


msysGit 缺省确实已经安装了 Git 的命令补齐功能，但在 /etc/profile 中没有找到 `. /etc/git-completion.bash`


## 中文支持
新版本的 msysGit 已经可以输入中文，检查 /etc/inputrc 中没有 `set meta-flag on` 其它三行都有。


新版本的 msysGit 分页器中文输出也已经没有问题了。检查 /etc/inputrc, /etc/profile 中并没有 LESSCHARSET 环境变量的设置。


新版本的 msysGit ls 命令也能显示中文文件名。检查 alias 发现
```bash
bruce@bruce-PC MINGW64 ~
$ alias
alias ll='ls -l'
alias ls='ls -F --color=auto --show-control-chars'
alias node='winpty node.exe'
alias php='winpty php.exe'

bruce@bruce-PC MINGW64 ~
$
```


## msysGit 中 Git 中文支持
- 提交说明中使用中文要额外配置。（最新版已不需要）
- 如果使用中文文件名或者目录名，在 Linux 平台检出文件名显示为乱码。反之亦然。
- 不能使用中文分支和里程碑（最新版已可以）


提交说明中使用中文要配置（最新版已不需要）
- `git config --system i18n.commitEncoding gbk` 设置录入提交说明时所使用的字符集
- `git config --system i18n.logOutputEncoding gbk` 使 git log 正确显示提交说明中的中文


中文文件名或者目录名要配置
- `git config --system core.quotepath false`
注意，即使如上配置，在 msysGit 中添加中文文件名的文件，只能在 msysGit 环境中正确显示，而在其他环境中文件名会出现乱码。


注意：如果同时安装了 Cygwin 和 msysGit （可能配置了相同的用户主目录），或者因为中文支持问题而需要单独为 TortoiseGit 准备一套 msysGit 时，为了保证不同的 msysGit 之间，以及和 Cygwin 之间的配置不会互相影响，而在配置 Git 环境时使用 –system 参数。这是因为不同的 msysGit 安装以及 Cygwin 有着不同的系统配置文件，但是用户级配置文件位置却可能重合。


测试
```bash
cd workspace
git init
mkdir 中文目录
echo 中文内容 > 中文目录/中文文件
git add 中文目录
git diff --cached
git status
git commit -m '初次提交'
git log -p
git tag 中文标签
git tag
git branch 中文分支
git branch
git checkout 中文分支
echo 添加内容 >> 中文目录/中文文件
git commit -a -m '修改中文文件'
git checkout master
git merge 中文分支
git log -p
cd ..
git clone --bare workspace workspace.git
```
结果
```bash
FIXME
```


FIXME 将库 clone 到 ubuntu 下测试。


## 使用 SSH 协议
## TortoiseGit 的安装和使用
TortoiseGit 给工作区的目录和文件的图标附加了标识版本控制状态的图像，可以非常直观的看到哪些文件被更改了需要提交。


TortoiseGit 是对 msysGit 命令行的封装，因此需要先安装 msysGit 。


## TortoiseGit 的中文支持
TortoiseGit 对使用中文命名的文件和目录的支持和 msysGit 一样，都存在缺陷，因此应当避免在 msysGit 和 TortoiseGit 中添加用中文命名的文件和目录。


# Reference
- http://www.worldhello.net/gotgit/01-meet-git/030-installation.html